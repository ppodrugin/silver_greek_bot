# Telegram бот для тренировки греческого языка

Бот для изучения греческого языка с поддержкой распознавания речи и генерации предложений через ИИ.

## Возможности

1. **Добавление слов в словарь** (`/add_words`) - два формата ввода
2. **Тренировка слов** - произношение слов из словаря
3. **Чтение текста** - произношение произвольного текста
4. **Генерация предложений через ИИ** - создание упражнений с помощью OpenAI

## Установка

### 1. Клонируйте репозиторий или скопируйте файлы

### 2. Установите зависимости

```bash
cd telegram_bot
pip install -r requirements.txt
```

**Для macOS может потребоваться:**
```bash
brew install portaudio
pip install pyaudio
```

### 3. Настройте переменные окружения

Создайте файл `.env` на основе `.env.example`:

```bash
cp .env.example .env
```

Отредактируйте `.env` и добавьте:

```
TELEGRAM_BOT_TOKEN=your_bot_token_here
OPENAI_API_KEY=your_openai_api_key_here
```

**Примечание:** SQLite база данных создается автоматически в файле `vocabulary.db` - никаких дополнительных настроек не требуется!

### 4. Получите токены

**Telegram Bot Token:**
1. Откройте Telegram и найдите @BotFather
2. Отправьте `/newbot`
3. Следуйте инструкциям для создания бота
4. Скопируйте токен в `.env`

**OpenAI API Key (опционально, для команды 4):**
1. Зарегистрируйтесь на https://platform.openai.com
2. Создайте API ключ
3. Скопируйте ключ в `.env`

## Запуск

```bash
python3 bot.py
```

## Команды бота

- `/start` - Начать работу с ботом
- `/help` - Показать справку
- `/add_words` - Добавить слова в словарь
- `/training` - Начать тренировку слов
- `/read_text` - Режим чтения текста
- `/ai_generate` - Генерация предложений через ИИ
- `/stats` - Показать статистику
- `/cancel` - Отменить текущую операцию

## Форматы добавления слов

### Формат 1 (CSV):
```
η οικογένεια,семья
```

### Формат 2 (многострочный):
```
η οικογένεια
семья

```

## Структура проекта

```
telegram_bot/
├── bot.py              # Основной файл бота
├── commands.py         # Обработчики команд
├── vocabulary.py       # Работа со словарем
├── utils.py            # Утилиты (распознавание речи, сравнение)
├── ai_generator.py     # Генерация через OpenAI
├── config.py           # Конфигурация
├── requirements.txt    # Зависимости
├── .env.example       # Пример файла с переменными окружения
└── README.md          # Этот файл
```

## Развертывание

Для развертывания на бесплатном хостинге см. файл `doc/DEPLOYMENT.md`.

## Примечания

- Бот использует Google Speech Recognition API для распознавания речи
- Для команды `/ai_generate` требуется OpenAI API ключ
- Словарь хранится в SQLite базе данных `vocabulary.db` (создается автоматически)
- Команда `/add_words` поддерживает добавление нескольких слов за раз в обоих форматах
- SQLite не требует установки отдельного сервера - это файловая база данных

