# Настройка OpenAI API Key

Для использования команды `/ai_generate` необходимо настроить OpenAI API ключ.

## Шаг 1: Получение API ключа

1. **Зарегистрируйтесь на OpenAI Platform:**
   - Перейдите на https://platform.openai.com/
   - Войдите или создайте новый аккаунт

2. **Создайте API ключ:**
   - Перейдите в раздел "API Keys" (https://platform.openai.com/api-keys)
   - Нажмите "Create new secret key"
   - Дайте ключу имя (например, "Telegram Bot")
   - **ВАЖНО:** Скопируйте ключ сразу! После закрытия окна вы не сможете его увидеть снова
   - Ключ выглядит примерно так: `sk-proj-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx`

3. **Пополните баланс (опционально):**
   - После регистрации у вас будет $5 бесплатного кредита на 3 месяца
   - Для дальнейшего использования нужно добавить платежную информацию в разделе "Billing"

## Шаг 2: Настройка в боте

1. **Создайте файл `.env` в папке `telegram_bot/`:**
   ```bash
   cd telegram_bot
   cp .env.example .env
   ```

2. **Откройте файл `.env` и добавьте ваш ключ:**
   ```bash
   nano .env
   # или
   vim .env
   ```

3. **Вставьте ваш OpenAI API ключ:**
   ```
   OPENAI_API_KEY=sk-proj-ваш_ключ_здесь
   ```

4. **Сохраните файл и перезапустите бота:**
   ```bash
   # Остановите бота (если запущен)
   pkill -9 -f "bot.py"
   
   # Запустите снова
   cd telegram_bot
   nohup python3 bot.py > bot.log 2>&1 &
   ```

## Проверка работы

После настройки попробуйте команду:
```
/ai_generate сгенери 10 предложений с винительным падежом
```

Если всё настроено правильно, бот сгенерирует предложения и начнет тренировку.

## Безопасность

⚠️ **ВАЖНО:**
- Никогда не публикуйте файл `.env` в Git репозиторий
- Файл `.env` уже добавлен в `.gitignore`
- Не делитесь вашим API ключом с другими
- Если ключ был скомпрометирован, удалите его на platform.openai.com и создайте новый

## Стоимость

- **Бесплатный кредит:** $5 на 3 месяца после регистрации
- **Модель gpt-4o-mini:** используется в боте, очень дешевая (~$0.15 за 1M токенов)
- **Типичное использование:** генерация 50 предложений стоит примерно $0.001-0.01

## Проблемы?

Если команда `/ai_generate` не работает:
1. Проверьте, что файл `.env` существует и содержит правильный ключ
2. Проверьте логи бота: `tail -f bot.log`
3. Убедитесь, что на вашем аккаунте OpenAI есть доступные средства
4. Проверьте, что ключ начинается с `sk-` и не содержит лишних пробелов

